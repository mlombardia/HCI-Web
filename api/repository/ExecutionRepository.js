const _0x3f33=['orderBy','offset','getFirstExecutionByAttrs','now','wasModified','whereIn','RoutineRepository','where','./RepositoryBase','routine','getExecutionsByUserId','count','Execution','getExecutionById','handleError','delete','./RoutineRepository','count(*)','getExecutions','./UserRepository','routineId','length','deleteExecution','isArray','getRoutineById','UserRepository','date','insert','results','exports','limit','insertExecution'];(function(_0x2c8639,_0x3f333b){const _0x1c8e4a=function(_0x302ed7){while(--_0x302ed7){_0x2c8639['push'](_0x2c8639['shift']());}};_0x1c8e4a(++_0x3f333b);}(_0x3f33,0x136));const _0x1c8e=function(_0x2c8639,_0x3f333b){_0x2c8639=_0x2c8639-0x0;let _0x1c8e4a=_0x3f33[_0x2c8639];return _0x1c8e4a;};const _0x1d84aa=_0x1c8e,RepositoryBase=require(_0x1d84aa('0x12'));module[_0x1d84aa('0x7')]=class ExecutionRepository extends RepositoryBase{constructor(_0x302ed7){super(),this['db']=_0x302ed7;}async['getExecutionById'](_0x21dfe1){const _0x50d4a1=_0x1d84aa;return this[_0x50d4a1('0xc')]({'id':_0x21dfe1});}async[_0x1d84aa('0x14')](_0x5bb128,_0x19c0f4,_0x5e53ef,_0x50107c,_0x31a3e1){const _0x5994b1=_0x1d84aa;return this[_0x5994b1('0x1c')]({'userId':_0x5bb128},_0x19c0f4,_0x5e53ef,_0x50107c,_0x31a3e1);}async[_0x1d84aa('0xc')](_0xce2fff){const _0x11663c=_0x1d84aa;try{const _0x27297f=await this[_0x11663c('0x1c')](_0xce2fff,0x0,0x1),_0x20c41a=_0x27297f[_0x11663c('0x6')];if(!Array[_0x11663c('0x1')](_0x20c41a)||_0x20c41a[_0x11663c('0x1f')]===0x0)return undefined;return _0x20c41a[0x0];}catch(_0x2e7fac){throw _0x2e7fac;}}async[_0x1d84aa('0x1c')](_0x15d9e0,_0xdfe0ad,_0x44bcc4,_0xb39003=_0x1d84aa('0x4'),_0x3c77b6){const _0x4fb23b=_0x1d84aa;if(!this['UserRepository']){const _0x3f9715=require(_0x4fb23b('0x1d'));this[_0x4fb23b('0x3')]=new _0x3f9715(this['db']);}if(!this['RoutineRepository']){const _0x98db08=require(_0x4fb23b('0x1a'));this[_0x4fb23b('0x10')]=new _0x98db08(this['db']);}let _0x8fe0a3,_0x2201c0;try{if(Array[_0x4fb23b('0x1')](_0x15d9e0['id'])){const _0x207596=_0x15d9e0['id'];delete _0x15d9e0['id'],_0x8fe0a3=await this['db'](_0x4fb23b('0x16'))['whereIn']('id',_0x207596)[_0x4fb23b('0x11')](_0x15d9e0)['offset'](_0xdfe0ad)[_0x4fb23b('0x8')](_0x44bcc4)[_0x4fb23b('0xa')](_0xb39003,_0x3c77b6),_0x2201c0=await this['db'](_0x4fb23b('0x16'))[_0x4fb23b('0xf')]('id',_0x207596)[_0x4fb23b('0x11')](_0x15d9e0)[_0x4fb23b('0x15')]();}else _0x8fe0a3=await this['db'](_0x4fb23b('0x16'))[_0x4fb23b('0x11')](_0x15d9e0)[_0x4fb23b('0xb')](_0xdfe0ad)[_0x4fb23b('0x8')](_0x44bcc4)[_0x4fb23b('0xa')](_0xb39003,_0x3c77b6),_0x2201c0=await this['db']('Execution')[_0x4fb23b('0x11')](_0x15d9e0)[_0x4fb23b('0x15')]();for(let _0x5c6965=0x0;_0x5c6965<_0x8fe0a3[_0x4fb23b('0x1f')];_0x5c6965++){_0x8fe0a3[_0x5c6965][_0x4fb23b('0xe')]=_0x8fe0a3[_0x5c6965][_0x4fb23b('0xe')]===0x0,_0x8fe0a3[_0x5c6965][_0x4fb23b('0x13')]=await this[_0x4fb23b('0x10')][_0x4fb23b('0x2')](_0x8fe0a3[_0x5c6965][_0x4fb23b('0x1e')]),delete _0x8fe0a3[_0x5c6965][_0x4fb23b('0x1e')];}return{'totalCount':_0x2201c0[0x0][_0x4fb23b('0x1b')],'offset':_0xdfe0ad,'limit':_0x44bcc4,'orderBy':_0xb39003,'direction':_0x3c77b6,'results':_0x8fe0a3};}catch(_0x5c9e74){throw super[_0x4fb23b('0x18')](_0x5c9e74);}}async[_0x1d84aa('0x9')](_0x241e99,_0x4c8960){const _0x3cedf1=_0x1d84aa;try{const {user:_0x3cdcc7,duration:_0x536a5f,wasModified:_0x48b6df}=_0x4c8960,_0x2e7ae4=await this['db']('Execution')[_0x3cedf1('0x5')]({'routineId':_0x241e99,'userId':_0x3cdcc7['id'],'date':Date[_0x3cedf1('0xd')](),'duration':_0x536a5f,'wasModified':_0x48b6df});if(!_0x2e7ae4)return undefined;return await this[_0x3cedf1('0x17')](_0x2e7ae4);}catch(_0x3da5ee){throw super['handleConstraintError'](_0x3da5ee);}}async[_0x1d84aa('0x0')](_0x8813d9){const _0x8b6601=_0x1d84aa;try{return await this['db'](_0x8b6601('0x16'))[_0x8b6601('0x11')]({'id':_0x8813d9})[_0x8b6601('0x19')]();}catch(_0x25b197){throw super[_0x8b6601('0x18')](_0x25b197);}}};