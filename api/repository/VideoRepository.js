const _0x516d=['handleError','offset','count','getVideos','number','delete','getFirstVideoByAttrs','where','orderBy','results','getVideoById','max','./RepositoryBase','exerciseId','whereIn','length','deleteVideo','count(*)','update','limit','insert','insertVideo','Video','handleConstraintError','isArray','exports'];(function(_0x36d0f9,_0x516d07){const _0x5c8f69=function(_0x877c5d){while(--_0x877c5d){_0x36d0f9['push'](_0x36d0f9['shift']());}};_0x5c8f69(++_0x516d07);}(_0x516d,0x194));const _0x5c8f=function(_0x36d0f9,_0x516d07){_0x36d0f9=_0x36d0f9-0x0;let _0x5c8f69=_0x516d[_0x36d0f9];return _0x5c8f69;};const _0x141971=_0x5c8f,RepositoryBase=require(_0x141971('0x18'));module[_0x141971('0xb')]=class VideoRepository extends RepositoryBase{constructor(_0x877c5d){super(),this['db']=_0x877c5d;}async['getVideoById'](_0x361a38){const _0x3be065=_0x141971;return this[_0x3be065('0x12')]({'id':_0x361a38});}async['getVideoByIds'](_0x196883,_0x298ab7){return this['getFirstVideoByAttrs']({'exerciseId':_0x196883,'id':_0x298ab7});}async['getFirstVideoByAttrs'](_0x1fc3ac){const _0x3b8913=_0x141971;try{const _0x269793=await this[_0x3b8913('0xf')](_0x1fc3ac,0x0,0x1),_0x32ee58=_0x269793[_0x3b8913('0x15')];if(!Array[_0x3b8913('0xa')](_0x32ee58)||_0x32ee58['length']===0x0)return undefined;return _0x32ee58[0x0];}catch(_0x2a836f){throw _0x2a836f;}}async[_0x141971('0xf')](_0x5d4644,_0x4d95de,_0x595aac,_0x518b4f=_0x141971('0x10'),_0xc154cb){const _0x26071e=_0x141971;try{let _0x10572a,_0x3bbd2b;if(Array['isArray'](_0x5d4644['id'])){const _0x316504=_0x5d4644['id'];delete _0x5d4644['id'],_0x10572a=await this['db'](_0x26071e('0x8'))['whereIn']('id',_0x316504)[_0x26071e('0x13')](_0x5d4644)[_0x26071e('0xd')](_0x4d95de)[_0x26071e('0x5')](_0x595aac)['orderBy'](_0x518b4f,_0xc154cb),_0x3bbd2b=await this['db']('Video')[_0x26071e('0x0')]('id',_0x316504)[_0x26071e('0x13')](_0x5d4644)[_0x26071e('0xe')]();}else _0x10572a=await this['db'](_0x26071e('0x8'))[_0x26071e('0x13')](_0x5d4644)['offset'](_0x4d95de)['limit'](_0x595aac)[_0x26071e('0x14')](_0x518b4f,_0xc154cb),_0x3bbd2b=await this['db'](_0x26071e('0x8'))[_0x26071e('0x13')](_0x5d4644)[_0x26071e('0xe')]();for(let _0x3ccbb1=0x0;_0x3ccbb1<_0x10572a['length'];_0x3ccbb1++){delete _0x10572a[_0x3ccbb1][_0x26071e('0x19')];}return{'totalCount':_0x3bbd2b[0x0][_0x26071e('0x3')],'offset':_0x4d95de,'limit':_0x595aac,'orderBy':_0x518b4f,'direction':_0xc154cb,'results':_0x10572a};}catch(_0x298b1a){throw super[_0x26071e('0xc')](_0x298b1a);}}async[_0x141971('0x7')](_0x5573a3,_0x31da31){const _0x2537a2=_0x141971;try{let {number:_0x1d4866,url:_0x2b1ca1}=_0x31da31;if(!_0x1d4866&&_0x1d4866!==0x0){let _0x533590=await this['db'](_0x2537a2('0x8'))[_0x2537a2('0x17')]({'max':'videoNumber'})['where']({'exerciseId':_0x5573a3});!Array[_0x2537a2('0xa')](_0x533590)||_0x533590[_0x2537a2('0x1')]===0x0?_0x1d4866=0x0:_0x1d4866=_0x533590[0x0][_0x2537a2('0x17')]+0x1;}const _0x21d1f3=await this['db'](_0x2537a2('0x8'))[_0x2537a2('0x6')]({'exerciseId':_0x5573a3,'number':_0x1d4866,'url':_0x2b1ca1});if(!_0x21d1f3)return undefined;return await this[_0x2537a2('0x16')](_0x21d1f3);}catch(_0x47292e){throw super['handleConstraintError'](_0x47292e);}}async['updateVideo'](_0x1a66f2,_0x34966e){const _0x4c33d0=_0x141971;try{const {number:_0x284c80,url:_0x5781e5}=_0x34966e,_0x17cceb=await this['db'](_0x4c33d0('0x8'))[_0x4c33d0('0x13')]({'id':_0x1a66f2})[_0x4c33d0('0x4')]({'number':_0x284c80,'url':_0x5781e5});if(_0x17cceb===0x0)return undefined;return await this[_0x4c33d0('0x16')](_0x1a66f2);}catch(_0x54b8a3){throw super[_0x4c33d0('0x9')](_0x54b8a3);}}async[_0x141971('0x2')](_0x5e9c2f){const _0x22199c=_0x141971;try{return await this['db'](_0x22199c('0x8'))[_0x22199c('0x13')]({'id':_0x5e9c2f})[_0x22199c('0x11')]();}catch(_0x50cd42){throw super[_0x22199c('0xc')](_0x50cd42);}}};