const _0x3cf7=['offset','Cycle_by_exercise','count(*)','insert','delete','orderBy','getFirstExerciseByAttrs','from','deleteExercise','join','insertExercise','length','limit','results','Exercise','isArray','handleError','getExerciseByIds','exerciseId','Exercise.id','update','getExerciseById','./RepositoryBase','where','max','exports','handleConstraintError','Cycle_by_exercise.exerciseId','whereIn','count'];(function(_0x51d995,_0x3cf7cc){const _0x78f8a5=function(_0x595596){while(--_0x595596){_0x51d995['push'](_0x51d995['shift']());}};_0x78f8a5(++_0x3cf7cc);}(_0x3cf7,0xc8));const _0x78f8=function(_0x51d995,_0x3cf7cc){_0x51d995=_0x51d995-0x0;let _0x78f8a5=_0x3cf7[_0x51d995];return _0x78f8a5;};const _0x4e633f=_0x78f8,RepositoryBase=require(_0x4e633f('0x2'));module[_0x4e633f('0x5')]=class ExerciseRepository extends RepositoryBase{constructor(_0x595596){super(),this['db']=_0x595596;}async[_0x4e633f('0x1')](_0x1d573a){const _0x5a72d3=_0x4e633f;return this[_0x5a72d3('0x10')]({'id':_0x1d573a});}async[_0x4e633f('0x1b')](_0x4f56b1,_0x26ab7b){const _0x158c78=_0x4e633f;return this[_0x158c78('0x10')]({'cycleId':_0x4f56b1,'id':_0x26ab7b});}async[_0x4e633f('0x10')](_0x3935d0){const _0x56ed37=_0x4e633f;try{const _0xe6136a=await this['getExercises'](_0x3935d0,0x0,0x1),_0x512455=_0xe6136a[_0x56ed37('0x17')];if(!Array['isArray'](_0x512455)||_0x512455[_0x56ed37('0x15')]===0x0)return undefined;return _0x512455[0x0];}catch(_0xbd6f70){throw _0xbd6f70;}}async['getExercises'](_0x8af9ee,_0x4ddb54,_0x297d35,_0x3db2f8='id',_0x4d2cd0){const _0x50cd6d=_0x4e633f;try{let _0x15561b,_0x520a4d;if(Array[_0x50cd6d('0x19')](_0x8af9ee['id'])){const _0x2abab5=_0x8af9ee['id'];delete _0x8af9ee['id'],_0x15561b=await this['db']['from']('Exercise')[_0x50cd6d('0x13')]('Cycle_by_exercise',_0x50cd6d('0x1d'),'=',_0x50cd6d('0x7'))[_0x50cd6d('0x8')]('id',_0x2abab5)[_0x50cd6d('0x3')](_0x8af9ee)['offset'](_0x4ddb54)[_0x50cd6d('0x16')](_0x297d35)[_0x50cd6d('0xf')](_0x3db2f8,_0x4d2cd0),_0x520a4d=await this['db'][_0x50cd6d('0x11')](_0x50cd6d('0x18'))[_0x50cd6d('0x13')]('Cycle_by_exercise',_0x50cd6d('0x1d'),'=',_0x50cd6d('0x7'))[_0x50cd6d('0x8')]('id',_0x2abab5)[_0x50cd6d('0x3')](_0x8af9ee)[_0x50cd6d('0x9')]();}else _0x15561b=await this['db'][_0x50cd6d('0x11')](_0x50cd6d('0x18'))[_0x50cd6d('0x13')](_0x50cd6d('0xb'),_0x50cd6d('0x1d'),'=',_0x50cd6d('0x7'))[_0x50cd6d('0x3')](_0x8af9ee)[_0x50cd6d('0xa')](_0x4ddb54)[_0x50cd6d('0x16')](_0x297d35)[_0x50cd6d('0xf')](_0x3db2f8,_0x4d2cd0),_0x520a4d=await this['db'][_0x50cd6d('0x11')](_0x50cd6d('0x18'))[_0x50cd6d('0x13')](_0x50cd6d('0xb'),_0x50cd6d('0x1d'),'=',_0x50cd6d('0x7'))[_0x50cd6d('0x3')](_0x8af9ee)[_0x50cd6d('0x9')]();for(let _0x49333a=0x0;_0x49333a<_0x15561b[_0x50cd6d('0x15')];_0x49333a++){delete _0x15561b[_0x49333a]['cycleId'],delete _0x15561b[_0x49333a][_0x50cd6d('0x1c')];}return{'totalCount':_0x520a4d[0x0][_0x50cd6d('0xc')],'offset':_0x4ddb54,'limit':_0x297d35,'orderBy':_0x3db2f8,'direction':_0x4d2cd0,'results':_0x15561b};}catch(_0x3198e1){throw super[_0x50cd6d('0x1a')](_0x3198e1);}}async[_0x4e633f('0x14')](_0x169f3b,_0x38cbc0){const _0x4f3a4e=_0x4e633f;try{let {name:_0x2ebc52,detail:_0x4f3142,type:_0xd5ef3,repetitions:_0x155377,duration:_0x4cf82c,order:_0x5b4410}=_0x38cbc0;if(!_0x5b4410&&_0x5b4410!==0x0){const _0x18aa59=await this['db'](_0x4f3a4e('0xb'))[_0x4f3a4e('0x4')]({'max':'order'})[_0x4f3a4e('0x3')]({'cycleId':_0x169f3b});(!Array[_0x4f3a4e('0x19')](_0x18aa59)||_0x18aa59[_0x4f3a4e('0x15')]===0x0)&&(_0x5b4410=0x0),_0x5b4410=_0x18aa59[0x0][_0x4f3a4e('0x4')]+0x1;}const _0x57a789=await this['db'](_0x4f3a4e('0x18'))[_0x4f3a4e('0xd')]({'name':_0x2ebc52,'detail':_0x4f3142,'type':_0xd5ef3,'repetitions':_0x155377,'duration':_0x4cf82c});if(!_0x57a789)return undefined;return await this['db'](_0x4f3a4e('0xb'))[_0x4f3a4e('0xd')]({'cycleId':_0x169f3b,'exerciseId':_0x57a789,'order':_0x5b4410}),await this[_0x4f3a4e('0x1')](_0x57a789);}catch(_0x79a265){throw super[_0x4f3a4e('0x6')](_0x79a265);}}async['updateExercise'](_0x4bb3c6,_0x385b75,_0x187f05){const _0x48ddef=_0x4e633f;try{const {name:_0x456dbe,detail:_0x17e056,type:_0x4cc3f5,repetitions:_0xdb4dfa,duration:_0x5a023e,order:_0x4731d6}=_0x187f05,_0x1d9ff4=await this['db'](_0x48ddef('0x18'))[_0x48ddef('0x3')]({'id':_0x385b75})[_0x48ddef('0x0')]({'name':_0x456dbe,'detail':_0x17e056,'type':_0x4cc3f5,'repetitions':_0xdb4dfa,'duration':_0x5a023e});(_0x4731d6||_0x4731d6===0x0)&&await this['db'](_0x48ddef('0xb'))['where']({'cycleId':_0x4bb3c6,'exerciseId':_0x385b75})[_0x48ddef('0x0')]({'order':_0x4731d6});if(_0x1d9ff4===0x0)return undefined;return await this[_0x48ddef('0x1')](_0x385b75);}catch(_0x34114c){throw super['handleConstraintError'](_0x34114c);}}async[_0x4e633f('0x12')](_0x2c9a52){const _0x22c0f5=_0x4e633f;try{await this['db'](_0x22c0f5('0xb'))['where']({'exerciseId':_0x2c9a52})[_0x22c0f5('0xe')]();const _0x4ad9c8=await this['db'](_0x22c0f5('0xb'))['where']({'exerciseId':_0x2c9a52});(!Array[_0x22c0f5('0x19')](_0x4ad9c8)||_0x4ad9c8['length']>0x0)&&await this['db'](_0x22c0f5('0x18'))[_0x22c0f5('0x3')]({'id':_0x2c9a52})[_0x22c0f5('0xe')]();return;}catch(_0x516b9f){throw super[_0x22c0f5('0x1a')](_0x516b9f);}}};