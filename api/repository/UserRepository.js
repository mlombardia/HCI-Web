const _0x1127=['insert','getUsers','getUserById','handleConstraintError','orderBy','results','getUsersPublicInfo','offset','birthdate','whereIn','fullName','getUserPublicInfoByUsername','updateUserDateLastActive','email','phone','getUserPublicInfoByEmail','length','getUserPublicInfoById','insertUser','where','exports','deleted','count(*)','getUserByEmail','updateUser','getFirstUserPublicInfoByAttrs','./RepositoryBase','password','verified','isArray','now','logicDeleteUser','update','Users','count','getFirstUserByAttrs'];(function(_0x46fa58,_0x1127d1){const _0x299963=function(_0x335c38){while(--_0x335c38){_0x46fa58['push'](_0x46fa58['shift']());}};_0x299963(++_0x1127d1);}(_0x1127,0x9e));const _0x2999=function(_0x46fa58,_0x1127d1){_0x46fa58=_0x46fa58-0x0;let _0x299963=_0x1127[_0x46fa58];return _0x299963;};const _0x53e406=_0x2999,RepositoryBase=require(_0x53e406('0xc'));module[_0x53e406('0x6')]=class UserRepository extends RepositoryBase{constructor(_0x335c38){super(),this['db']=_0x335c38;}async[_0x53e406('0x18')](_0x462019){return this['getFirstUserByAttrs']({'id':_0x462019});}async[_0x53e406('0x9')](_0x1d77dc){const _0x52d8ce=_0x53e406;return this[_0x52d8ce('0x15')]({'email':_0x1d77dc});}async['getUserByUsername'](_0x268170){const _0x3d3601=_0x53e406;return this[_0x3d3601('0x15')]({'username':_0x268170});}async[_0x53e406('0x15')](_0x1551fa){const _0x46ca11=_0x53e406;try{const _0x49db63=await this[_0x46ca11('0x17')](_0x1551fa,0x0,0x1),_0x74d8c6=_0x49db63[_0x46ca11('0x1b')];if(!Array[_0x46ca11('0xf')](_0x74d8c6)||_0x74d8c6['length']===0x0)return undefined;return _0x74d8c6[0x0];}catch(_0x14b9e2){throw _0x14b9e2;}}async[_0x53e406('0x3')](_0xb12dbf){const _0x4d4667=_0x53e406;return this[_0x4d4667('0xb')]({'id':_0xb12dbf});}async[_0x53e406('0x1')](_0x10b8bd){const _0x3f9da1=_0x53e406;return this[_0x3f9da1('0xb')]({'email':_0x10b8bd});}async[_0x53e406('0x21')](_0xccdf30){const _0x40517e=_0x53e406;return this[_0x40517e('0xb')]({'username':_0xccdf30});}async['getFirstUserPublicInfoByAttrs'](_0x255aed){const _0x3d0317=_0x53e406;try{const _0x488271=await this[_0x3d0317('0x1c')](_0x255aed,0x0,0x1),_0x1957bf=_0x488271['results'];if(!Array['isArray'](_0x1957bf)||_0x1957bf[_0x3d0317('0x2')]===0x0)return undefined;return _0x1957bf[0x0];}catch(_0xf64067){throw _0xf64067;}}async['getUsersPublicInfo'](_0x96f985,_0x29384e,_0x2fb107,_0x54c49e){const _0xeec971=_0x53e406;let _0x38a5be=await this['getUsers'](_0x96f985,_0x29384e,_0x2fb107,_0x54c49e);for(let _0xcbd523=0x0;_0xcbd523<_0x38a5be[_0xeec971('0x1b')][_0xeec971('0x2')];_0xcbd523++){delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0x20')],delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0xd')],delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0x1e')],delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0x23')],delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0x0')],delete _0x38a5be['results'][_0xcbd523][_0xeec971('0x7')],delete _0x38a5be[_0xeec971('0x1b')][_0xcbd523][_0xeec971('0xe')];}return _0x38a5be;}async[_0x53e406('0x17')](_0x2c3a3c,_0x2462e4,_0x30fe6e,_0x49905f='dateCreated'){const _0x2935bf=_0x53e406;try{let _0x469b23,_0x311a49;if(Array[_0x2935bf('0xf')](_0x2c3a3c['id'])){const _0x4f7d9a=_0x2c3a3c['id'];delete _0x2c3a3c['id'],_0x469b23=await this['db'](_0x2935bf('0x13'))[_0x2935bf('0x1f')]('id',_0x4f7d9a)[_0x2935bf('0x5')](_0x2c3a3c)['offset'](_0x2462e4)['limit'](_0x30fe6e)[_0x2935bf('0x1a')](_0x49905f),_0x311a49=await this['db'](_0x2935bf('0x13'))['whereIn']('id',_0x4f7d9a)['where'](_0x2c3a3c)[_0x2935bf('0x14')]();}else _0x469b23=await this['db'](_0x2935bf('0x13'))[_0x2935bf('0x5')](_0x2c3a3c)[_0x2935bf('0x1d')](_0x2462e4)['limit'](_0x30fe6e)[_0x2935bf('0x1a')](_0x49905f),_0x311a49=await this['db'](_0x2935bf('0x13'))[_0x2935bf('0x5')](_0x2c3a3c)['count']();for(let _0x2a809b=0x0;_0x2a809b<_0x469b23[_0x2935bf('0x2')];_0x2a809b++){_0x469b23[_0x2a809b][_0x2935bf('0x7')]=_0x469b23[_0x2a809b]['deleted']!==0x0,_0x469b23[_0x2a809b]['verified']=_0x469b23[_0x2a809b][_0x2935bf('0xe')]!==0x0;}return{'totalCount':_0x311a49[0x0][_0x2935bf('0x8')],'offset':_0x2462e4,'limit':_0x30fe6e,'orderBy':_0x49905f,'results':_0x469b23};}catch(_0x3c4b64){throw super['handleError'](_0x3c4b64);}}async[_0x53e406('0x4')](_0x1d3722){const _0x444cc8=_0x53e406;try{const {username:_0x59b9cc,fullName:_0x3b4e53,email:_0x1e969d,password:_0x381aee,gender:_0x2c7469,phone:_0x577800,avatarUrl:_0x366e33,birthdate:_0x507b46}=_0x1d3722,_0x465d08=await this['db'](_0x444cc8('0x13'))[_0x444cc8('0x16')]({'username':_0x59b9cc,'fullName':_0x3b4e53,'email':_0x1e969d,'birthdate':_0x507b46,'password':_0x381aee,'gender':_0x2c7469,'phone':_0x577800,'avatarUrl':_0x366e33,'dateCreated':Date[_0x444cc8('0x10')](),'dateLastActive':Date[_0x444cc8('0x10')](),'deleted':![],'verified':![]});if(!_0x465d08)return undefined;return await this[_0x444cc8('0x18')](_0x465d08);}catch(_0x416a4a){throw super[_0x444cc8('0x19')](_0x416a4a);}}async[_0x53e406('0xa')](_0x311ba8,_0x29cfb5){const _0x2203e6=_0x53e406;try{const {fullName:_0x402a95,gender:_0x2862e2,phone:_0x1b7188,avatarUrl:_0x5c9f34}=_0x29cfb5,_0x27cdc1=await this['db'](_0x2203e6('0x13'))[_0x2203e6('0x5')]({'id':_0x311ba8})[_0x2203e6('0x12')]({'fullName':_0x402a95,'gender':_0x2862e2,'phone':_0x1b7188,'avatarUrl':_0x5c9f34});if(_0x27cdc1===0x0)return undefined;return await this[_0x2203e6('0x18')](_0x311ba8);}catch(_0x56826f){throw super[_0x2203e6('0x19')](_0x56826f);}}async[_0x53e406('0x22')](_0x1bd1b7,_0x219737){const _0x127f39=_0x53e406;try{await this['db'](_0x127f39('0x13'))[_0x127f39('0x5')]({'id':_0x1bd1b7})[_0x127f39('0x12')]({'dateLastActive':_0x219737});}catch(_0x11b97a){throw super['handleConstraintError'](_0x11b97a);}}async[_0x53e406('0x11')](_0x4756ca){const _0x54cec5=_0x53e406;try{const _0x4ae93=await this['db'](_0x54cec5('0x13'))['where']({'id':_0x4756ca})[_0x54cec5('0x12')]({'deleted':!![]});if(_0x4ae93===0x0)return undefined;return await this[_0x54cec5('0x3')](_0x4756ca);}catch(_0x1d7ea8){throw super[_0x54cec5('0x19')](_0x1d7ea8);}}async['verifyUser'](_0x38b0ab){const _0x5187c0=_0x53e406;try{const _0x7f0fd6=await this['db']('Users')[_0x5187c0('0x5')]({'id':_0x38b0ab})[_0x5187c0('0x12')]({'verified':!![]});if(_0x7f0fd6===0x0)return undefined;return await this[_0x5187c0('0x3')](_0x38b0ab);}catch(_0x504b3b){throw super[_0x5187c0('0x19')](_0x504b3b);}}};