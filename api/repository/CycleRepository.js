const _0x1322=['limit','insertCycle','handleError','orderBy','count(*)','insert','getCycleByIds','results','routineId','./RepositoryBase','length','max','getCycles','delete','deleteCycle','whereIn','handleConstraintError','where','Cycle','count','isArray','getCycleById','getFirstCycleByAttrs','update'];(function(_0x5a0e25,_0x13228a){const _0x54cea4=function(_0x5d3f72){while(--_0x5d3f72){_0x5a0e25['push'](_0x5a0e25['shift']());}};_0x54cea4(++_0x13228a);}(_0x1322,0x106));const _0x54ce=function(_0x5a0e25,_0x13228a){_0x5a0e25=_0x5a0e25-0x0;let _0x54cea4=_0x1322[_0x5a0e25];return _0x54cea4;};const _0x3fdb51=_0x54ce,RepositoryBase=require(_0x3fdb51('0xb'));module['exports']=class CycleRepository extends RepositoryBase{constructor(_0x5d3f72){super(),this['db']=_0x5d3f72;}async['getCycleById'](_0x5ba601){const _0x3e59d0=_0x3fdb51;return this[_0x3e59d0('0x0')]({'id':_0x5ba601});}async[_0x3fdb51('0x8')](_0x27769d,_0x509535){const _0x26d139=_0x3fdb51;return this[_0x26d139('0x0')]({'routineId':_0x27769d,'id':_0x509535});}async[_0x3fdb51('0x0')](_0x35e210){const _0x4e664b=_0x3fdb51;try{const _0x4f3e32=await this['getCycles'](_0x35e210,0x0,0x1),_0x2163c7=_0x4f3e32[_0x4e664b('0x9')];if(!Array[_0x4e664b('0x16')](_0x2163c7)||_0x2163c7[_0x4e664b('0xc')]===0x0)return undefined;return _0x2163c7[0x0];}catch(_0x2e790e){throw _0x2e790e;}}async[_0x3fdb51('0xe')](_0x56295f,_0x2aacba,_0x4dc3be,_0x1b868f='id',_0x91e86b){const _0x229621=_0x3fdb51;try{let _0x1948fa,_0x4af6ff;if(Array[_0x229621('0x16')](_0x56295f['id'])){const _0x389361=_0x56295f['id'];delete _0x56295f['id'],_0x1948fa=await this['db'](_0x229621('0x14'))[_0x229621('0x11')]('id',_0x389361)[_0x229621('0x13')](_0x56295f)['offset'](_0x2aacba)[_0x229621('0x2')](_0x4dc3be)[_0x229621('0x5')](_0x1b868f,_0x91e86b),_0x4af6ff=await this['db']('Cycle')['whereIn']('id',_0x389361)[_0x229621('0x13')](_0x56295f)[_0x229621('0x15')]();}else _0x1948fa=await this['db'](_0x229621('0x14'))['where'](_0x56295f)['offset'](_0x2aacba)['limit'](_0x4dc3be)[_0x229621('0x5')](_0x1b868f,_0x91e86b),_0x4af6ff=await this['db'](_0x229621('0x14'))['where'](_0x56295f)['count']();for(let _0x3fe1b2=0x0;_0x3fe1b2<_0x1948fa[_0x229621('0xc')];_0x3fe1b2++){delete _0x1948fa[_0x3fe1b2][_0x229621('0xa')];}return{'totalCount':_0x4af6ff[0x0][_0x229621('0x6')],'offset':_0x2aacba,'limit':_0x4dc3be,'orderBy':_0x1b868f,'direction':_0x91e86b,'results':_0x1948fa};}catch(_0x1583f4){throw super[_0x229621('0x4')](_0x1583f4);}}async[_0x3fdb51('0x3')](_0x1e32ff,_0xd0a930){const _0x376e98=_0x3fdb51;try{let {name:_0x228442,detail:_0x43baa7,type:_0x1455a1,order:_0x4ce762,repetitions:_0x1cdd7d}=_0xd0a930;if(!_0x4ce762&&_0x4ce762!==0x0){const _0x41aaaa=await this['db']('Cycle_by_exercise')[_0x376e98('0xd')]({'max':'order'})[_0x376e98('0x13')]({'routineId':_0x1e32ff});(!Array[_0x376e98('0x16')](_0x41aaaa)||_0x41aaaa[_0x376e98('0xc')]===0x0)&&(_0x4ce762=0x0),_0x4ce762=_0x41aaaa[0x0]['max']+0x1;}const _0x274f7d=await this['db'](_0x376e98('0x14'))[_0x376e98('0x7')]({'routineId':_0x1e32ff,'name':_0x228442,'detail':_0x43baa7,'type':_0x1455a1,'order':_0x4ce762,'repetitions':_0x1cdd7d});if(!_0x274f7d)return undefined;return await this[_0x376e98('0x17')](_0x274f7d);}catch(_0x16869f){throw super['handleConstraintError'](_0x16869f);}}async['updateCycle'](_0x335176,_0x4ca669){const _0x35dab7=_0x3fdb51;try{const {name:_0x40365e,detail:_0x41d74c,type:_0x882717,repetitions:_0x41f5b1}=_0x4ca669,_0x59f0bb=await this['db']('Cycle')[_0x35dab7('0x13')]({'id':_0x335176})[_0x35dab7('0x1')]({'name':_0x40365e,'detail':_0x41d74c,'type':_0x882717,'repetitions':_0x41f5b1});if(_0x59f0bb===0x0)return undefined;return await this[_0x35dab7('0x17')](_0x335176);}catch(_0x5879d7){throw super[_0x35dab7('0x12')](_0x5879d7);}}async[_0x3fdb51('0x10')](_0x213cbf){const _0x15893a=_0x3fdb51;try{return await this['db']('Cycle')['where']({'id':_0x213cbf})[_0x15893a('0xf')]();}catch(_0x435243){throw super['handleError'](_0x435243);}}};