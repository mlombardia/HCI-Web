const _0x5050=['./config/mailing','./repository','./middleware/user_activity_handler','readFileSync','utf8','/swagger.json','api/swagger.yaml','./middleware/swagger_validator_handler','use','host','./middleware/auth_handler','passport-jwt','secure','log','path','swaggerMetadata','passport','exports','getUserById','swagger-tools','ExtractJwt','dotenv','development','JWT_SECRET','initialize','sub','user','iat','Swagger-ui\x20is\x20available\x20on\x20http://localhost:%d/docs','listen','createTransport','deleted','locals','config','swaggerUi','mailingTransporter','password','./controllers','LoggedWhitelistRepository','port','UserRepository','env','safeLoad','swaggerRouter','./knex/knex.js','PORT','Strategy','log_iat','js-yaml','initializeMiddleware','Server\x20is\x20ready\x20to\x20take\x20our\x20messages','join','express','Your\x20server\x20is\x20listening\x20on\x20port\x20%d\x20(http://localhost:%d)','fromAuthHeaderAsBearerToken','cors'];(function(_0x18949e,_0x505089){const _0x2255ff=function(_0x9a69db){while(--_0x9a69db){_0x18949e['push'](_0x18949e['shift']());}};_0x2255ff(++_0x505089);}(_0x5050,0x101));const _0x2255=function(_0x18949e,_0x505089){_0x18949e=_0x18949e-0x0;let _0x2255ff=_0x5050[_0x18949e];return _0x2255ff;};const _0x1bfa33=_0x2255;'use strict';require(_0x1bfa33('0x2c'))[_0x1bfa33('0x0')]();const passport=require(_0x1bfa33('0x27')),passportJWT=require(_0x1bfa33('0x22')),ExtractJWT=passportJWT[_0x1bfa33('0x2b')],JwtStrategy=passportJWT[_0x1bfa33('0xd')],passportOpts={'jwtFromRequest':ExtractJWT[_0x1bfa33('0x15')](),'secretOrKey':process[_0x1bfa33('0x8')][_0x1bfa33('0x2e')]},fs=require('fs'),path=require(_0x1bfa33('0x25')),express=require(_0x1bfa33('0x13'));var app=express();const swaggerTools=require(_0x1bfa33('0x2a')),jsyaml=require(_0x1bfa33('0xf')),options={'swaggerUi':path['join'](__dirname,_0x1bfa33('0x1c')),'controllers':path[_0x1bfa33('0x12')](__dirname,_0x1bfa33('0x4')),'useStubs':process['env']['NODE_ENV']===_0x1bfa33('0x2d')};var spec=fs[_0x1bfa33('0x1a')](path[_0x1bfa33('0x12')](__dirname,_0x1bfa33('0x1d')),_0x1bfa33('0x1b')),swaggerDoc=jsyaml[_0x1bfa33('0x9')](spec);const knex=require(_0x1bfa33('0xb')),Repository=require(_0x1bfa33('0x18'))(knex);app[_0x1bfa33('0x37')]['repository']=Repository;const nodemailer=require('nodemailer'),{service}=require(_0x1bfa33('0x17')),transporter=nodemailer[_0x1bfa33('0x35')]({'host':service[_0x1bfa33('0x20')],'port':service[_0x1bfa33('0x6')],'secure':service[_0x1bfa33('0x23')],'auth':{'user':service[_0x1bfa33('0x31')],'pass':service[_0x1bfa33('0x3')]}});transporter['verify'](function(_0x9a69db,_0x33f121){const _0x3c4f37=_0x1bfa33;_0x9a69db?console[_0x3c4f37('0x24')](_0x9a69db):console[_0x3c4f37('0x24')](_0x3c4f37('0x11'));}),app[_0x1bfa33('0x37')][_0x1bfa33('0x2')]=transporter;const cors=require(_0x1bfa33('0x16')),swaggerValidatorHandler=require(_0x1bfa33('0x1e')),userActivityHandler=require(_0x1bfa33('0x19')),errorHandler=require('./middleware/error_handler');swaggerTools[_0x1bfa33('0x10')](swaggerDoc,function(_0x5ba8d9){const _0x76ae0e=_0x1bfa33;app[_0x76ae0e('0x1f')](_0x5ba8d9[_0x76ae0e('0x26')]()),app[_0x76ae0e('0x1f')](cors()),passport[_0x76ae0e('0x1f')](new JwtStrategy(passportOpts,async function(_0x3b8cfc,_0x3148a0){const _0x54f4a5=_0x76ae0e,_0x29905a=await Repository[_0x54f4a5('0x5')]['validLoggedUser']({'userId':_0x3b8cfc[_0x54f4a5('0x30')],'iat':_0x3b8cfc[_0x54f4a5('0x32')]});if(!_0x29905a)return _0x3148a0(null,![]);let _0x818378=await Repository[_0x54f4a5('0x7')][_0x54f4a5('0x29')](_0x3b8cfc[_0x54f4a5('0x30')]);return _0x818378[_0x54f4a5('0xe')]=_0x3b8cfc[_0x54f4a5('0x32')],_0x818378&&!_0x818378[_0x54f4a5('0x36')]?_0x3148a0(null,_0x818378):_0x3148a0(null,![]);}));const _0x552e8f=require(_0x76ae0e('0x21'))(passport);app[_0x76ae0e('0x1f')](passport[_0x76ae0e('0x2f')]()),app[_0x76ae0e('0x1f')](_0x552e8f),app['use'](userActivityHandler(Repository)),app[_0x76ae0e('0x1f')](_0x5ba8d9['swaggerValidator']({'validateResponse':![]})),app[_0x76ae0e('0x1f')](swaggerValidatorHandler),app[_0x76ae0e('0x1f')](_0x5ba8d9[_0x76ae0e('0xa')](options)),app[_0x76ae0e('0x1f')](_0x5ba8d9[_0x76ae0e('0x1')]()),app[_0x76ae0e('0x1f')](errorHandler),app[_0x76ae0e('0x34')](process[_0x76ae0e('0x8')][_0x76ae0e('0xc')]||0x1f90,function(){const _0x4ec6d0=_0x76ae0e;console[_0x4ec6d0('0x24')](_0x4ec6d0('0x14'),process[_0x4ec6d0('0x8')]['PORT'],process[_0x4ec6d0('0x8')][_0x4ec6d0('0xc')]),console[_0x4ec6d0('0x24')](_0x4ec6d0('0x33'),process[_0x4ec6d0('0x8')]['PORT']);});}),module[_0x1bfa33('0x28')]=app;