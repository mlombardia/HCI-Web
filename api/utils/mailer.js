const _0x1d1e=['randomBytes','<%CONFIRM_LINK%>','<%EMAIL%>','sendVerificationEmail','updateEmailCode','<%USERNAME%>','insertEmailCode','exports','toString','toUpperCase','sendMail','crypto','confirmationLink','from','<%EXPIRATION_DATE%>','hex','email','codeExpirationInterval','getTime','subject','<%CODE%>','username','replace','<%USER_ID%>','../config/mailing'];(function(_0x146975,_0x1d1e84){const _0x4453e9=function(_0xccfa1c){while(--_0xccfa1c){_0x146975['push'](_0x146975['shift']());}};_0x4453e9(++_0x1d1e84);}(_0x1d1e,0x19d));const _0x4453=function(_0x146975,_0x1d1e84){_0x146975=_0x146975-0x0;let _0x4453e9=_0x1d1e[_0x146975];return _0x4453e9;};const _0x1144d3=_0x4453,crypto=require(_0x1144d3('0x17')),{registerVerification}=require(_0x1144d3('0xb'));module[_0x1144d3('0x13')][_0x1144d3('0xf')]=async(_0xccfa1c,_0x53f317,_0x59c0f0)=>{const _0x21bd1c=_0x1144d3,{EmailCodeRepository:_0x178d4b}=_0x53f317,_0x2eb7a3=crypto[_0x21bd1c('0xc')](0x3)[_0x21bd1c('0x14')](_0x21bd1c('0x2'))[_0x21bd1c('0x15')](),_0x33529f=await _0x178d4b['getFirstEmailCodeByUserId'](_0x59c0f0['id']),_0x148a69=registerVerification&&registerVerification[_0x21bd1c('0x4')]?registerVerification['codeExpirationInterval']:0x18*0x3c*0x3c*0x3e8,_0x1d4b2f={'userId':_0x59c0f0['id'],'code':_0x2eb7a3,'expirationDate':new Date(new Date()[_0x21bd1c('0x5')]()+_0x148a69)};_0x33529f?await _0x178d4b[_0x21bd1c('0x10')](_0x59c0f0['id'],_0x1d4b2f):await _0x178d4b[_0x21bd1c('0x12')](_0x1d4b2f);let _0x486409=registerVerification['htmlBodyTemplate'][_0x21bd1c('0x9')](_0x21bd1c('0xa'),_0x59c0f0['id'])[_0x21bd1c('0x9')]('<%CODE%>',_0x2eb7a3)[_0x21bd1c('0x9')](_0x21bd1c('0x11'),_0x59c0f0[_0x21bd1c('0x8')])[_0x21bd1c('0x9')](_0x21bd1c('0xe'),_0x59c0f0['email'])[_0x21bd1c('0x9')](_0x21bd1c('0x1'),_0x1d4b2f['expirationDate'])[_0x21bd1c('0x9')](_0x21bd1c('0xd'),registerVerification[_0x21bd1c('0x18')][_0x21bd1c('0x9')](_0x21bd1c('0xa'),_0x59c0f0['id'])[_0x21bd1c('0x9')](_0x21bd1c('0x7'),_0x2eb7a3)['replace'](_0x21bd1c('0x11'),_0x59c0f0['username'])[_0x21bd1c('0x9')](_0x21bd1c('0xe'),_0x59c0f0[_0x21bd1c('0x3')]));const _0x287d03={'from':registerVerification[_0x21bd1c('0x0')],'to':_0x59c0f0[_0x21bd1c('0x3')],'subject':registerVerification[_0x21bd1c('0x6')],'html':_0x486409};try{return await _0xccfa1c[_0x21bd1c('0x16')](_0x287d03),!![];}catch(_0x4bcab9){return console['log'](_0x4bcab9),![];}};